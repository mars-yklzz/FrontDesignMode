<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>单例模式弹框</title>
</head>
<style>
    #modal {
        height: 200px;
        width: 200px;
        line-height: 200px;
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        border: 1px solid black;
        text-align: center;
    }
</style>

<body>
    <button id='open'>打开弹框</button>
    <button id='close'>关闭弹框</button>
    <script>
        // 闭包形式
        // const Modal = (
        //     function () {
        //         let modal
        //         return function () {
        //             if (!modal) {
        //                 modal = document.createElement('div')
        //                 modal.innerHTML = '我是一个全局唯一的Modal'
        //                 modal.id = 'modal'
        //                 modal.style.display = 'none'
        //                 document.body.appendChild(modal)
        //             }
        //             return modal
        //         }
        //     }
        // )()

        class Modal {
            constructor() {
                this.modal = document.createElement('div')
                this.modal.innerHTML = '我是一个全局唯一的Modal'
                this.modal.id = 'modal'
                this.modal.style.display = 'none'
                document.body.appendChild(this.modal)
            }
            static getInstance() {
                if (!Modal.instance) {
                    Modal.instance = new Modal()
                }
                return Modal.instance
            }
            open() {
                this.modal.style.display = 'block'
            }
            close() {
                this.modal.style.display = 'none'
            }
        }

        document.getElementById("open").addEventListener('click', () => {
            // const modal = Modal()
            // modal.style.display = 'block'
            const modal = Modal.getInstance()
            modal.open()
        })
        document.getElementById("close").addEventListener('click', () => {
            // const modal = Modal()
            // modal.style.display = 'none'
            const modal = Modal.getInstance()
            modal.close()
        })
    </script>


</body>

</html>