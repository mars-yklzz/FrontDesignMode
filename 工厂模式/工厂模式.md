## 工厂模式
1. 什么是工厂模式
2. 工厂模式的实现
3. 工厂模式在vue库中的应用
4. 工厂模式的优缺点
5. 工厂模式的应用

### 什么是工厂模式
>  工厂模式就是根据不同的输入返回不同的实例, 主要思想是将对象的创建和对象的实现分离

### 工厂模式的实现方式
1. 简单工厂模式又叫静态工厂模式,由一个工厂对象决定创建某一种产品对象类的实例. 主要用来创建同一类对象
```js
  class User {
            constructor(op) {
                this.name = op.name
                this.age = op.age
            }
            // 静态方法
            static getInstance(role) {
                switch (role) {
                    case 'superAdmin':
                        return new User({ name: 'ZS', age: 18 })
                        break;
                    case 'admin':
                        return new User({ name: '管理员' })
                        break
                    case 'user':
                        return new User({ name: 'user', age: 17 })
                    default:
                        break;
                }
            }
        }

        let superAdmin = User.getInstance('superAdmin')
        let admin = User.getInstance('admin')
        let user = User.getInstance('user')
```
简单工厂模式的优势在于,只需要一个参数就可以获得所需的对象,无需知道对象创建的具体细节. 但是在函数内部包含了对象的所有创建逻辑,和判断逻辑的代码,如果判断逻辑很多,或者代码逻辑很复杂
适用情况
- 创建的对象数据较少
- 创建对象的逻辑不是很复杂

2. 工厂方法模式
工厂方法模式本意是将实际创建对象的工作放在子类中,这样核心类就变成了抽象类
new.target来模拟抽象类,它指向直接被new执行的构造函数
```js
  class User {
            constructor(name, viewPage) {
                if (new.target === User) {
                    throw new Error('抽象类不能实例化')
                }
                this.name = name
                this.viewPage = viewPage
            }
        }

        class UserFactory extends User {
            constructor(name, viewPage) {
                super(name, viewPage)
            }
            create(role) {
                switch (role) {
                    case 'superAdmin':
                        return new UserFactory({ name: 'ZS', age: 18 })
                        break;
                    case 'admin':
                        return new UserFactory({ name: '管理员' })
                        break
                    case 'user':
                        return new UserFactory({ name: 'user', age: 17 })
                    default:
                        break;
                }
            }
        }

        let userFactory = new UserFactory()
        let superAdmin = userFactory.create('superAdmin')
        let admin = userFactory.create('admin')
        let user = userFactory.create('user')
```

3. 抽象工厂模式
产品类簇的创建,抽象工厂方法模式 是对同一类产品的抽象，那么 抽象工厂模式 就是对同一类簇的抽象，也可以说是对一个复杂对象，进行更细致的抽象；
```js
// 手机的抽象类
        class Phone {


            constructor(name, price) {
                this.name = name;
                this.price = price;
            }

            call() { }
        }

        // 笔记本的抽象类
        class Laptop {


            constructor(name, price) {
                this.name = name;
                this.price = price;
            }

            // 打游戏
            game(gameName) {

            }
        }

        /**
         * 小米本身作为一个产品簇，拥有手机，笔记本的多个品种，
         *  1. 先实现产品簇中的某个产品类；
         *  2. 在通过整个工厂，整合所有的产品
         */
        class MiPhone extends Phone {
            call() {
                console.log("少林功夫好哎");
            }
        }

        class MiLaptop extends Laptop {
            game(gameName) {
                console.log(`小米电脑适合${gameName}`);
            }
        }

        class Mi {
            getPhone(name, price) {
                return new MiPhone(name, price);
            }

            getLaptop(name, price) {
                return new MiLaptop(name, price);
            }
        }

        const miShop = new Mi();
        const miPhone = miShop.getLaptop("P40", 3600);
        console.log(miPhone);
```

### vue中工厂模式的实现
1. vnode
```js
function createElement() {

}
```
2. vue-router

### 工厂模式的优缺点
优点
- 良好的封装,代码结构清晰,访问者无需知道对象的创建流程
- 扩展性优良,通过工厂方法隔离了用户和创建流程,符合开闭原则
- 解耦了高层逻辑和底层产品类,符合最少知识原则,不需要的就不要去交流

缺点: 带来了额外的复杂度,增加了抽象性

### 工厂模式的使用场景
- 对象的创建比较复杂,而访问无需知道创建的具体流程
- 处理大量具有相同属性的小对象

