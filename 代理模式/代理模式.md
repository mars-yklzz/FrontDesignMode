## 代理模式
1. 什么是代理模式
2. 代理模式的实现
3. 代理模式在框架中的应用
4. 代理模式的优缺点
5. 代理模式的使用场景

### 什么是代理模式
> 代理模式又称委托模式, 它为目标对象创造了一个代理对象,以控制对目标对象的访问

### 代理模式的实现
基础
```js
const superStar = {
            name: '小鲜肉',
            playAdvertisement: function (ad) {
                console.log(ad)
            }
        }

        const ProxyAssistant = {
            name: '经纪人张某',
            playAdvertisement(reward, ad) {
                if (reward > 1000000) {
                    superStar.playAdvertisement(ad)
                } else {
                  console.log('不拍')  
                }
            }
        }

        ProxyAssistant.playAdvertisement(1000, 'asdasdasdas')
```
升级->有档期
```js
const superStar = {
            name: '小鲜肉',
            playAdvertisement: function (ad) {
                console.log(ad)
            }
        }

        const ProxyAssistant = {
            name: '经纪人张某',
            scheduleTime() {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        console.log('小鲜肉有空了')
                        resolve()
                    }, 2000)
                })
            },
            playAdvertisement(reward, ad) {
                if (reward > 1000000) {
                    console.log('拍广告')
                    ProxyAssistant.scheduleTime().then(() => {
                        superStar.playAdvertisement(ad)
                    })
                } else {
                    console.log('不拍')
                }
            }
        }
```
Proxy
```js
 const superStar = {
            name: '小鲜肉',
            scheduleFlag: false,
            playAdvertisement: function (ad) {
                console.log(ad,'11111111')
            }
        }

        const ProxyAssistant = {
            name: '经纪人张某',
            scheduleTime(ad) {
                const schedule = new Proxy(superStar, { // 监听scheduleFlag的变化
                    set(obj, key, val) {
                     
                        if (key !== 'scheduleFlag') return
                        if (obj.scheduleFlag === false && val === true) {
                            console.log('asdasdasd')
                            obj.scheduleFlag = true
                            obj.playAdvertisement(ad)
                        }
                    }
                })
                setTimeout(() => {
                    console.log('有空了拍')
                    schedule.scheduleFlag = true
                })
            },
            playAdvertisement(reward, ad) {
                if (reward > 100000) {
                    ProxyAssistant.scheduleTime(ad)
                } else {
                    console.log('gun')
                }
            }
        }
        ProxyAssistant.playAdvertisement(10000000, '啊实打实打算大')
```
Object.defineProperty
```js
const superStar = {
            name: '小鲜肉',
            scheduleFlagAct: false,
            playAdvertisement: function (ad) {
                console.log(ad,'11111111')
            }
        }

        const ProxyAssistant = {
            name: '经纪人张某',
            scheduleTime(ad) {
                Object.defineProperty(superStar, 'scheduleFlag', {
                    get() {
                        return superStar.scheduleFlagAct
                    },
                    set(val) {
                        if (superStar.scheduleFlagAct === false && val === true) {
                            superStar.scheduleFlagAct = true
                            superStar.playAdvertisement(ad)
                        }
                    }
                })
                setTimeout(() => {
                    console.log('有空了拍')
                    superStar.scheduleFlag = true
                })
            },
            playAdvertisement(reward, ad) {
                if (reward > 100000) {
                    ProxyAssistant.scheduleTime(ad)
                } else {
                    console.log('gun')
                }
            }
        }
        ProxyAssistant.playAdvertisement(10000000, 'hahahahahahah')
```

### 代理模式在实战中的应用
1. axios中的拦截器
2. vue框架数据响应式
3. 缓存代理
```js

```
4. 保护代理和虚拟代理
5. 正向代理和反向代理

### 代理模式的优缺点
优点
- 代理对象在访问和目标对象直接起到中介和保护目标对象的作用
- 代理对象可以扩展目标对象的功能
- 代理模式能将访问者与目标对象分离,在一定程度上降低了系统的耦合度, 如果我们希望适度扩展目标对象的一些功能,通过修改代理对象就可以了,符合开闭原则

缺点
- 增加了系统的复杂度,要斟酌当前场景是否需要代理模式

### 